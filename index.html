<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>éšæœºé€‰äºº</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #1a1a2e 0%, #2a2356 100%);
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            color: #ecf0f1;
            position: relative;
        }

        .container {
            position: relative;
            padding: 50px;
            border-radius: 25px;
            background: rgba(40, 40, 70, 0.5);
            box-shadow: 0 0 100px rgba(106, 90, 205, 0.3);
            text-align: center;
            width: 500px;
        }

        h1 {
            font-size: 3em;
            color: #8a8ac4;
            text-shadow: 0 0 20px rgba(138, 43, 226, 0.5);
            margin-bottom: 50px;
        }

        #display {
            font-size: 4em;
            color: #d8bfd8;
            text-align: center;
            margin: 50px 0;
            min-height: 1.5em;
            text-shadow: 0 0 30px #9370db;
        }

        #display-selecting {
            animation: text-glow 2s ease-in-out infinite alternate;
        }

        #display-selected {
            color: #ffd700;
            animation: none;
        }

        .score {
            font-size: 2em;
            margin-top: 30px;
            display: none; /* é»˜è®¤éšè—åŠ åˆ†æŒ‰é’® */
        }

        .score-button {
            padding: 15px 30px;
            font-size: 1.5em;
            background: linear-gradient(45deg, #6a5acd, #9370db);
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            margin: 0 10px;
        }

        .score-button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 40px rgba(147, 112, 219, 0.5);
        }

        #select-button {
            padding: 20px 50px;
            font-size: 3em;
            background: linear-gradient(45deg, #6a5acd, #9370db);
            border: none;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 30px;
        }

        #select-button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 40px rgba(147, 112, 219, 0.5);
        }

        #submit-button {
            padding: 15px 40px;
            font-size: 1.5em;
            background: linear-gradient(45deg, #6a5acd, #9370db);
            border: none;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 30px;
        }

        #submit-button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 40px rgba(147, 112, 219, 0.5);
        }

        .result {
            font-size: 2.5em;
            color: #d8bfd8;
            margin-top: 30px;
            display: none; /* é»˜è®¤éšè—ç»“æœæ  */
        }

        @keyframes breathe {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.7; transform: scale(1.05); }
        }

        @keyframes text-glow {
            from { text-shadow: 0 0 20px #9370db; }
            to { text-shadow: 0 0 50px #6a5acd; }
        }

        /* æ·»åŠ Canvasæ ·å¼ */
        #canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div class="container">
        <div class="breathing-light"></div>
        <h1>éšæœºé€‰äººç³»ç»Ÿ</h1>
        <div id="display" class="display-selecting">ğŸ® Ready</div>
        <button id="select-button" onclick="selectRandom()">å¼€å§‹éšæœº</button>
        <div id="score-section" class="score">
            <button class="score-button" onclick="updateScore(1)">+</button>
            <span id="score">0</span>
            <button class="score-button" onclick="updateScore(-1)">-</button>
            <button id="submit-button" onclick="submitScore()">æäº¤</button>
        </div>
        <div id="result" class="result"></div>
    </div>

    <audio id="audio" src="éŸ³æ•ˆ.mp3" preload="auto"></audio>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const names = [
            "éƒ­ä¿Šæµ·", "æå˜‰å¦®", "æ–¹æ•å¨´", "é’Ÿç¾½å½¤", "éº¦ç‰ç",
            "ææ™“æ¸”", "æ¢é¦¨å…", "é»„ç§€è‹", "é™ˆç¦¾æ€è•¾", "é‚±éœ",
            "éƒ­æ¶›", "å´å’å¤", "é»„å¿ƒè•¾", "é»„ä¸½é¢–", "èµµæ¬£é›¨",
            "ç§¦æ™“èŠ¸", "å†œç´ ä¾¦", "å¼ æ€é™", "é¡¾å®¹å", "é™ˆå…†å®‡",
            "å¼ å©·å©·", "é™†æ¢…è²", "å»–å§—å§—", "é™†é‡‘ç‹", "é™ˆæ¢…æ¸…",
            "è°¢æ™¶æ™¶", "ä¸ä¸½è²", "å¶æ¥ ", "ä½•å¤", "é™ˆçœŸç",
            "è¦ƒæ¢¦åœ†", "èƒ¡èŠ³", "é»„é™å…°", "é»„æ™“æ•", "é»„é›ªç«"
        ];

        // ä¸ºæ¯ä¸ªåå­—åˆ†é…ä¸€ä¸ªé¢œè‰²
        const nameColors = {
            "éƒ­ä¿Šæµ·": "#ff69b4",
            "æå˜‰å¦®": "#32cd32",
            "æ–¹æ•å¨´": "#9400d3",
            "é’Ÿç¾½å½¤": "#ffff00",
            "éº¦ç‰ç": "#8a2be2",
            "ææ™“æ¸”": "#00ffff",
            "æ¢é¦¨å…": "#ffa500",
            "é»„ç§€è‹": "#ff4500",
            "é™ˆç¦¾æ€è•¾": "#20b2aa",
            "é‚±éœ": "#ff6347",
            "éƒ­æ¶›": "#1e90ff",
            "å´å’å¤": "#ff00ff",
            "é»„å¿ƒè•¾": "#98fb98",
            "é»„ä¸½é¢–": "#00ff7f",
            "èµµæ¬£é›¨": "#add8e6",
            "ç§¦æ™“èŠ¸": "#dda0dd",
            "å†œç´ ä¾¦": "#228b22",
            "å¼ æ€é™": "#ff0000",
            "é¡¾å®¹å": "#0000ff",
            "é™ˆå…†å®‡": "#008000",
            "å¼ å©·å©·": "#ffa07a",
            "é™†æ¢…è²": "#ff69b4",
            "å»–å§—å§—": "#32cd32",
            "é™†é‡‘ç‹": "#9400d3",
            "é™ˆæ¢…æ¸…": "#ffff00",
            "è°¢æ™¶æ™¶": "#8a2be2",
            "ä¸ä¸½è²": "#00ffff",
            "å¶æ¥ ": "#ffa500",
            "ä½•å¤": "#ff4500",
            "é™ˆçœŸç": "#20b2aa",
            "è¦ƒæ¢¦åœ†": "#ff6347",
            "èƒ¡èŠ³": "#1e90ff",
            "é»„é™å…°": "#ff00ff",
            "é»„æ™“æ•": "#98fb98",
            "é»„é›ªç«": "#00ff7f"
        };

        let selectedName = null;
        let score = 0;
        let particlesL = [];
        let particlesR = [];
        const audio = document.getElementById('audio');

        function selectRandom() {
            const display = document.getElementById('display');
            display.classList.add('display-selecting');
            display.classList.remove('display-selected');
            display.style.color = '#ecf0f1';
            display.textContent = "ğŸ® Ready";

            document.getElementById('score-section').style.display = 'none';
            document.getElementById('result').style.display = 'none';

            let count = 0;
            const totalIterations = 15;

            const interval = setInterval(() => {
                selectedName = names[Math.floor(Math.random() * names.length)];
                display.textContent = selectedName;
                count++;

                // æ¯æ¬¡æ›´æ–°åå­—æ—¶æ’­æ”¾éŸ³æ•ˆå’Œå¯åŠ¨çƒŸèŠ±ç‰¹æ•ˆ
                audio.play();
                startFireworks();

                if (count >= totalIterations) {
                    clearInterval(interval);
                    display.classList.remove('display-selecting');
                    display.classList.add('display-selected');
                    display.style.color = '#ffd700';
                    display.style.animation = 'text-glow 2s ease-in-out infinite alternate';
                    setTimeout(() => {
                        display.style.color = '#ecf0f1';
                        display.style.animation = 'none';
                    }, 1000);

                    // æ˜¾ç¤ºåŠ åˆ†æŒ‰é’®å¹¶é‡ç½®åˆ†æ•°
                    document.getElementById('score-section').style.display = 'block';
                    score = 0;
                    document.getElementById('score').textContent = score.toString();

                    // å¯åŠ¨çƒŸèŠ±ç‰¹æ•ˆ
                    startFireworks();
                }
            }, 100);
        }

        function updateScore(change) {
            if (selectedName) {
                score += change;
                document.getElementById('score').textContent = score.toString();
            } else {
                alert('è¯·å…ˆéšæœºé€‰æ‹©ä¸€ä¸ªåå­—');
            }
        }

        function submitScore() {
            if (selectedName) {
                const result = `${selectedName} çš„åˆ†æ•°æ˜¯: ${score}`;
                document.getElementById('result').textContent = result;
                document.getElementById('result').style.display = 'block';

                // éšè—åŠ åˆ†æŒ‰é’®
                document.getElementById('score-section').style.display = 'none';
            } else {
                alert('è¯·å…ˆéšæœºé€‰æ‹©ä¸€ä¸ªåå­—');
            }
        }

        // çƒŸèŠ±ç²’å­å¯¹è±¡
        function Particle(x, y, color, size, lifespan, speed) {
            this.x = x;
            this.y = y;
            this.color = color;
            this.size = size;
            this.lifespan = lifespan;
            this.speed = speed;
        }

        Particle.prototype.update = function () {
            this.lifespan--;
            this.size *= 0.98;
            this.y -= this.speed;

            if (this.lifespan <= 0) {
                return false;
            }
            return true;
        };

        Particle.prototype.draw = function () {
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
        };

        function createFirework(left) {
            let color = nameColors[selectedName] || '#ffffff'; // é»˜è®¤ç™½è‰²
            let size = 5 + Math.random() * 10;
            let lifespan = 100 + Math.random() * 50;
            let speed = 2 + Math.random() * 5;

            if (left) {
                particlesL.push(new Particle(Math.random() * canvas.width / 2, canvas.height * 0.9, color, size, lifespan, speed));
            } else {
                particlesR.push(new Particle(canvas.width / 2 + Math.random() * canvas.width / 2, canvas.height * 0.9, color, size, lifespan, speed));
            }
        }

        // å¯åŠ¨çƒŸèŠ±
        function startFireworks() {
            for (let i = 0; i < 200; i++) {
                setTimeout(createFirework, i * 10, true);
                setTimeout(createFirework, i * 10, false);
            }
            animate();
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            particlesL = particlesL.filter(particle => particle.update());
            particlesL.forEach(particle => particle.draw());

            particlesR = particlesR.filter(particle => particle.update());
            particlesR.forEach(particle => particle.draw());

            if (particlesL.length > 0 || particlesR.length > 0) {
                requestAnimationFrame(animate);
            }
        }
    </script>
</body>
</html>
